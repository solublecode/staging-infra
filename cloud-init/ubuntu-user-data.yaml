#cloud-config
package_update: true
package_upgrade: true
packages:
    - unzip
    - net-tools
    - docker.io
    - openjdk-14-jre-headless
runcmd:
    - [mkdir, -p, /etc/consul.d]
    - [mkdir, -p, /opt/consul]
    - [mkdir, -p, /etc/nomad.d]
    - [mkdir, -p, /opt/nomad]
    - [mkdir, -p, /etc/vault.d]
    - [mkdir, -p, /opt/vault]
bootcmd:
    - ifdown eth0
write_files:
    - path: /etc/profile
        content: |
            export PRIVATE_IP=`ifconfig eth1 | grep 'inet ' | sed 's/\s\s*/ /g' | cut -d' ' -f3 | awk '{ print $1}'`
    